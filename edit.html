<html>
  <div class="box">
    
    <div class="logo-box">
      <img
        src="./assets/Group 4.png"
        alt="Plugin Logo"
        style="width: 20px; height: auto"
      />

    </div>
    <div class="duplicate_box">
      <h5 class="duplicate">Select the number of component you want to duplicate</h5>
      <input type="number" placeholder="1"  min="1" max="100" step="1" id="instanceValue">
    </div>
    <div class="file_box">
         <img
        src="./assets/symbols_add.png"
        alt="Plugin Logo"
        style="width: 20px; height: auto"
      />
    </div>
    <p class="file_label">Click Add to select component you want to duplicate</p>
    <div class="button_box">
      <button class="button_next">Next</button>
    </div>
  </div>
  </html>
<!-- <input id="instanceValue" type="number" placeholder="No of instance" />
<input id="newText" placeholder="New text" />
<div>
  <input type="checkbox" id="imagecheck" />
  <label for="imagecheck">Image Check</label>
</div>
<h3>Replace Image</h3>
<div>
  <input type="file" id="file-input" accept="image/*" disabled />
</div>
<!-- <input id="imageName" placeholder="Image name to replace" /> -->
<!-- <input id="newImageUrl" placeholder="New image URL" /> -->
<!-- <button id="upload-button">Upload</button> --> 

<style>
  body {
    background-color: #333333;
    color: #fff;
    margin: 30px 0;
    
  }
  .box {
    display: flex;
    width: 280px;
    flex-direction: column;
    align-items: center;
    margin: 0 auto;
  }
  .duplicate_box {
    margin-bottom: 20px;
  }
  .duplicate {
    font-size: 10px;
  }
  #instanceValue {
    width: 100%;
    width: 280px;

    background: #454545;
    height: 30px;
    outline: none;
    /* border: 0.1px solid #888585; */
    border: hidden;
    border-radius: 5px;
    padding: 0px 10px;
    color: #fff;
  }
  #instanceValue::placeholder {
    color: #fff;
  }
  .file_box {
    display: flex;
    align-items: center;
    justify-content: center;
    margin-top: 20px;
    width: 280px;
    height: 150px;
    background-color: #454545;
    border: 1px dashed #fff;
    border-radius: 10px;
    border-image: repeating-linear-gradient(to right bottom ,#888585 0, #888585 15px, transparent 15px, transparent 30px) 1;
  }
  .file_label {
    font-size: 10px;
  }
  .button_box {
    align-items: flex-end;
    justify-content: flex-end;
    align-self: flex-end;
    justify-self: flex-end;
    justify-items: flex-end;
  }
  .button_next {
    background-color: #B2DB11;
    color: #000;
    padding: 10px 25px;
    border-radius: 5px;
    border: none;
  }
</style>

<script>
  const checkBox = document.getElementById("imagecheck");
  const fileInput = document.getElementById("file-input");

  const uploadButton = document.getElementById("upload-button");

  checkBox.addEventListener("change", function () {
    const selectedValue = checkBox.checked;

    console.log(selectedValue);

    if (selectedValue) {
      fileInput.disabled = false; // Enable the button if a value is selected
      uploadButton.disabled = true;

      if (fileInput.files.length > 0) {
        uploadButton.disabled = false; // Enable the upload button
      }
    } else {
      fileInput.disabled = true; // Disable the button if no value is selected
      uploadButton.disabled = false;
    }
    console.log(fileInput.files.length);
  });
  fileInput.addEventListener("change", function () {
    if (fileInput.files.length > 0) {
      // A file is selected

      uploadButton.disabled = false; // Enable the upload button
      //     uploadButton.disabled = !fileInput.files.length;
    } else {
      // No file is selected
      uploadButton.disabled = true; // Disable the upload button
    }
  });

  uploadButton.onclick = () => {
    const instanceValue = document.getElementById("instanceValue").value;
    const newText = document.getElementById("newText").value;
    console.log(newText);
    console.log("html");

    const file = fileInput.files[0];
    if (file) {
      const reader = new FileReader();
      reader.onload = function (event) {
        const arrayBuffer = event.target.result;
        console.log(arrayBuffer);
        parent.postMessage(
          {
            pluginMessage: {
              type: "replace-all",
              imageBytes: new Uint8Array(arrayBuffer),
              newText,
              instanceValue,
            },
          },
          "*"
        );
      };
      reader.readAsArrayBuffer(file);
    } else {
      parent.postMessage(
        {
          pluginMessage: {
            type: "replace-all",
            newText,
            instanceValue,
          },
        },
        "*"
      );
    }
    // const imageName = document.getElementById("imageName").value;
    // const newImageUrl = document.getElementById("newImageUrl").value;
    // parent.postMessage(
    //   { pluginMessage: { type: "replace-image", imageName, newImageUrl } },
    //   "*"
    // );
  };

  //   document.getElementById("upload-button").onclick = () => {
  //     const imageName = document.getElementById("imageName").value;
  //     const newImageUrl = document.getElementById("newImageUrl").value;
  //     parent.postMessage(
  //       { pluginMessage: { type: "replace-image", imageName, newImageUrl } },
  //       "*"
  //     );
  //   };
</script>
